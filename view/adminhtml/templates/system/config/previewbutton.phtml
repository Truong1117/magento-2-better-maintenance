<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_BetterMaintenance
 * @copyright   Copyright (c) Mageplaza (https://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */

/**
 * @var \Mageplaza\BetterMaintenance\Block\Adminhtml\System\PreviewButton $block
 */
?>
<div class="actions actions-maintenance-preview">
    <button class="button-maintenance-preview" data-url="<?= $block->getDataUrl() ?>" type="button"
            id="<?= $block->getHtmlId() ?>">
        <span><?= /* @noEscape */
            $block->getButtonLabel() ?></span>
    </button>
</div>

<script type="text/javascript">
    require(['jquery'], function ($) {
        $('#<?= $block->getHtmlId() ?>').on('click', function () {
            var form = $('<form/>', {
                action: $(this).data('url'),
                target: '_blank',
                method: 'POST'
            });
            var data = $('#config-edit-form').serialize();
            var input = $("<input>").attr("type", "hidden").attr("name", "mydata").val(data);
            form.append(input);
            $('body').append(form);
            form.submit();
            form.remove();
        })
    });
</script>
